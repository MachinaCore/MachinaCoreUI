{"version":3,"sources":["../src/ajax-load.js"],"names":["AjaxLoad","$","NAME","VERSION","DATA_KEY","JQUERY_NO_CONFLICT","fn","ClassName","ACTIVE","NAV_PILLS","NAV_TABS","OPEN","VIEW_SCRIPT","Event","CLICK","Selector","HEAD","NAV_DROPDOWN","NAV_LINK","NAV_ITEM","Default","defaultPage","errorPage","subpagesDirectory","element","config","_config","_getConfig","_element","url","location","hash","replace","setUpUrl","html","_addEventListeners","loadPage","window","beforeHook","ajax","type","dataType","success","result","afterHook","error","href","removeClass","split","addClass","menuName","menuElement","parent","hasClass","menuElementParentName","find","text","first","loadBlank","open","loadTop","document","on","event","currentTarget","getAttribute","startsWith","preventDefault","stopPropagation","target","_jQueryInterface","each","data","Constructor","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery'\r\n\r\n/**\r\n * --------------------------------------------------------------------------\r\n * MachinaCoreUI (v2.0.3): ajax-load.js\r\n * Licensed under MIT\r\n * --------------------------------------------------------------------------\r\n */\r\n\r\n\r\nconst AjaxLoad = (($) => {\r\n  /**\r\n   * ------------------------------------------------------------------------\r\n   * Constants\r\n   * ------------------------------------------------------------------------\r\n   */\r\n\r\n  const NAME                       = 'ajaxLoad'\r\n  const VERSION                    = '2.0.3'\r\n  const DATA_KEY                   = 'coreui.ajaxLoad'\r\n  const JQUERY_NO_CONFLICT         = $.fn[NAME]\r\n\r\n  const ClassName = {\r\n    ACTIVE      : 'active',\r\n    NAV_PILLS   : 'nav-pills',\r\n    NAV_TABS    : 'nav-tabs',\r\n    OPEN        : 'open',\r\n    VIEW_SCRIPT : 'view-script'\r\n  }\r\n\r\n  const Event = {\r\n    CLICK : 'click'\r\n  }\r\n\r\n  const Selector = {\r\n    HEAD         : 'head',\r\n    NAV_DROPDOWN : '.sidebar-nav .nav-dropdown',\r\n    NAV_LINK     : '.sidebar-nav .nav-link',\r\n    NAV_ITEM     : '.sidebar-nav .nav-item',\r\n    VIEW_SCRIPT  : '.view-script'\r\n  }\r\n\r\n  const Default = {\r\n    defaultPage       : 'views/main.html',\r\n    errorPage         : 'views/404.html',\r\n    subpagesDirectory : ''\r\n  }\r\n\r\n  class AjaxLoad {\r\n    constructor(element, config) {\r\n      this._config = this._getConfig(config)\r\n      this._element = element\r\n\r\n      const url = location.hash.replace(/^#/, '')\r\n\r\n      if (url !== '') {\r\n        this.setUpUrl(url)\r\n      } else if ($('#ui-view').html() === '') {\r\n        this.setUpUrl(this._config.defaultPage)\r\n      }\r\n      this._addEventListeners()\r\n    }\r\n\r\n    // Getters\r\n\r\n    static get VERSION() {\r\n      return VERSION\r\n    }\r\n\r\n    static get Default() {\r\n      return Default\r\n    }\r\n\r\n    // Public\r\n    loadPage(url) {\r\n      const config = this._config\r\n\r\n      if (typeof window.beforeHook === 'function') {\r\n        window.beforeHook()\r\n      }\r\n\r\n      window.location.hash = url.replace('/#/', '/')\r\n      $.ajax({\r\n        type : 'GET',\r\n        url : config.subpagesDirectory + url.replace('/#/', '/'),\r\n        dataType : 'html',\r\n        success(result) {\r\n          $('#ui-view').html(result)\r\n          if (typeof window.afterHook === 'function') {\r\n            window.afterHook()\r\n          }\r\n        },\r\n        error() {\r\n          $.ajax({\r\n            type : 'GET',\r\n            url : config.errorPage,\r\n            dataType : 'html',\r\n            success(result) {\r\n              $('#ui-view').html(result)\r\n              if (typeof window.afterHook === 'function') {\r\n                window.afterHook()\r\n              }\r\n            },\r\n            error() {\r\n              window.location.href = config.errorPage\r\n            }\r\n          })\r\n        }\r\n      })\r\n    }\r\n\r\n    setUpUrl(url) {\r\n      $(Selector.NAV_LINK).removeClass(ClassName.ACTIVE)\r\n      $(Selector.NAV_DROPDOWN).removeClass(ClassName.OPEN)\r\n\r\n      $(`${Selector.NAV_DROPDOWN}:has(a[href=\"${url.split('?')[0]}\"])`).addClass(ClassName.OPEN)\r\n      $(`${Selector.NAV_ITEM} a[href=\"${url.split('?')[0]}\"]`).addClass(ClassName.ACTIVE)\r\n\r\n      // Setup Breadcrumb\r\n      let menuName = '<li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>'\r\n      /* eslint-disable */\r\n      $.menuElement = $('nav .nav li:has(a[href=\"' + url.split('?')[0] + '\"])')\r\n      if ($.menuElement.parent().parent().hasClass('nav-dropdown open')) {\r\n        $.menuElementParentName = $.menuElement.parent().parent().find('span:first').text()\r\n        menuName += '<li class=\"breadcrumb-item\">' + $.menuElementParentName + '</li>'\r\n      }\r\n      menuName += '<li class=\"breadcrumb-item active\">' + $('nav .nav li:has(a[href=\"' + url.split('?')[0] + '\"])').find('.active').find('span').first().text() + '</li>'\r\n      /* eslint-enable */\r\n      $('#breadcrumb').html(menuName)\r\n\r\n      this.loadPage(url)\r\n    }\r\n\r\n    loadBlank(url) {\r\n      window.open(url)\r\n    }\r\n\r\n    loadTop(url) {\r\n      window.location = url\r\n    }\r\n\r\n    // Private\r\n\r\n    _getConfig(config) {\r\n      config = {\r\n        ...Default,\r\n        ...config\r\n      }\r\n      return config\r\n    }\r\n\r\n    _addEventListeners() {\r\n      $(document).on(Event.CLICK, '[href]', (event) => {\r\n        // console.log($(this).attr('href'))\r\n        if (event.currentTarget.getAttribute('href').startsWith('/#/')) {\r\n          event.preventDefault()\r\n          event.stopPropagation()\r\n          // console.log(\"ajax\")\r\n          if (event.currentTarget.target === '_top') {\r\n            this.loadTop(event.currentTarget.href)\r\n          } else if (event.currentTarget.target === '_blank') {\r\n            this.loadBlank(event.currentTarget.href)\r\n          } else {\r\n            this.setUpUrl(event.currentTarget.getAttribute('href'))\r\n          }\r\n        }\r\n      })\r\n    }\r\n\r\n    // Static\r\n\r\n    static _jQueryInterface(config) {\r\n      return this.each(function () {\r\n        let data = $(this).data(DATA_KEY)\r\n        const _config = typeof config === 'object' && config\r\n\r\n        if (!data) {\r\n          data = new AjaxLoad(this, _config)\r\n          $(this).data(DATA_KEY, data)\r\n        }\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * ------------------------------------------------------------------------\r\n   * jQuery\r\n   * ------------------------------------------------------------------------\r\n   */\r\n\r\n  $.fn[NAME] = AjaxLoad._jQueryInterface\r\n  $.fn[NAME].Constructor = AjaxLoad\r\n  $.fn[NAME].noConflict = () => {\r\n    $.fn[NAME] = JQUERY_NO_CONFLICT\r\n    return AjaxLoad._jQueryInterface\r\n  }\r\n\r\n  return AjaxLoad\r\n})($)\r\n\r\nexport default AjaxLoad\r\n"],"file":"ajax-load.js"}