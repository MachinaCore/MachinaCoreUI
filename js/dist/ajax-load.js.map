{"version":3,"sources":["../src/ajax-load.js"],"names":["AjaxLoad","$","NAME","VERSION","DATA_KEY","JQUERY_NO_CONFLICT","fn","ClassName","ACTIVE","NAV_PILLS","NAV_TABS","OPEN","VIEW_SCRIPT","Event","CLICK","Selector","HEAD","NAV_DROPDOWN","NAV_LINK","NAV_ITEM","Default","defaultPage","errorPage","subpagesDirectory","element","config","_config","_getConfig","_element","url","location","hash","replace","setUpUrl","_addEventListeners","loadPage","window","preparePage","loadScripts","src","script","document","createElement","type","className","onload","onreadystatechange","readyState","length","body","getElementsByTagName","appendChild","ajax","dataType","beforeSend","remove","success","result","wrapper","innerHTML","scripts","Array","from","querySelectorAll","map","attributes","getNamedItem","nodeValue","forEach","parentNode","removeChild","animate","scrollTop","html","error","href","removeClass","split","addClass","menuName","menuElement","parent","hasClass","find","text","first","loadBlank","open","loadTop","on","event","preventDefault","stopPropagation","currentTarget","target","getAttribute","_jQueryInterface","each","data","Constructor","noConflict"],"mappings":"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","sourcesContent":["import $ from 'jquery'\n\n/**\n * --------------------------------------------------------------------------\n * CoreUI (v2.0.3): ajax-load.js\n * Licensed under MIT (https://coreui.io/license)\n * --------------------------------------------------------------------------\n */\n\n\nconst AjaxLoad = (($) => {\n  /**\n   * ------------------------------------------------------------------------\n   * Constants\n   * ------------------------------------------------------------------------\n   */\n\n  const NAME                       = 'ajaxLoad'\n  const VERSION                    = '2.0.3'\n  const DATA_KEY                   = 'coreui.ajaxLoad'\n  const JQUERY_NO_CONFLICT         = $.fn[NAME]\n\n  const ClassName = {\n    ACTIVE      : 'active',\n    NAV_PILLS   : 'nav-pills',\n    NAV_TABS    : 'nav-tabs',\n    OPEN        : 'open',\n    VIEW_SCRIPT : 'view-script'\n  }\n\n  const Event = {\n    CLICK : 'click'\n  }\n\n  const Selector = {\n    HEAD         : 'head',\n    NAV_DROPDOWN : '.sidebar-nav .nav-dropdown',\n    NAV_LINK     : '.sidebar-nav .nav-link',\n    NAV_ITEM     : '.sidebar-nav .nav-item',\n    VIEW_SCRIPT  : '.view-script'\n  }\n\n  const Default = {\n    defaultPage       : 'views/main.html',\n    errorPage         : 'views/404.html',\n    subpagesDirectory : ''\n  }\n\n  class AjaxLoad {\n    constructor(element, config) {\n      this._config = this._getConfig(config)\n      this._element = element\n\n      const url = location.hash.replace(/^#/, '')\n\n      if (url !== '') {\n        this.setUpUrl(url)\n      } else {\n        this.setUpUrl(this._config.defaultPage)\n      }\n      this._addEventListeners()\n    }\n\n    // Getters\n\n    static get VERSION() {\n      return VERSION\n    }\n\n    static get Default() {\n      return Default\n    }\n\n    // Public\n\n    loadPage(url) {\n      if (typeof window.preparePage === 'function') {\n        window.preparePage()\n      }\n\n      const element = this._element\n      const config = this._config\n\n      const loadScripts = (src, element = 0) => {\n        const script = document.createElement('script')\n        script.type = 'text/javascript'\n        script.src = src[element]\n        script.className = ClassName.VIEW_SCRIPT\n        // eslint-disable-next-line no-multi-assign\n        script.onload = script.onreadystatechange = function () {\n          if (!this.readyState || this.readyState === 'complete') {\n            if (src.length > element + 1) {\n              loadScripts(src, element + 1)\n            }\n          }\n        }\n        const body = document.getElementsByTagName('body')[0]\n        body.appendChild(script)\n      }\n\n      $.ajax({\n        type : 'GET',\n        url : config.subpagesDirectory + url,\n        dataType : 'html',\n        beforeSend() {\n          $(Selector.VIEW_SCRIPT).remove()\n        },\n        success(result) {\n          const wrapper = document.createElement('div')\n          wrapper.innerHTML = result\n\n          const scripts = Array.from(wrapper.querySelectorAll('script[src]')).map((script) => script.attributes.getNamedItem('src').nodeValue)\n\n          wrapper.querySelectorAll('script[src]').forEach((script) => script.parentNode.removeChild(script))\n\n          $('body').animate({\n            scrollTop: 0\n          }, 0)\n          $(element).html(wrapper)\n          if (scripts.length) {\n            loadScripts(scripts)\n          }\n          window.location.hash = url\n        },\n        error() {\n          window.location.href = config.errorPage\n        }\n      })\n    }\n\n    setUpUrl(url) {\n      $(Selector.NAV_LINK).removeClass(ClassName.ACTIVE)\n      $(Selector.NAV_DROPDOWN).removeClass(ClassName.OPEN)\n\n      $(`${Selector.NAV_DROPDOWN}:has(a[href=\"${url.split('?')[0]}\"])`).addClass(ClassName.OPEN)\n      $(`${Selector.NAV_ITEM} a[href=\"${url.split('?')[0]}\"]`).addClass(ClassName.ACTIVE)\n\n      // Setup Breadcrumb\n      let menuName = '<li class=\"breadcrumb-item\"><a href=\"/\">Home</a></li>'\n      $.menuElement = $(`$('nav .nav li:has(a[href=\"${url.split('?')[0]}\"])')`)\n      if ($.menuElement.parent().parent().hasClass('nav-dropdown open')) {\n        menuName += `<li class='breadcrumb-item'>${$.menuElement.parent().parent().find('span:first').text()}</li>`\n      }\n      menuName += `<li class=\"breadcrumb-item active\">${$(`nav .nav li:has(a[href=\"${url.split('?')[0]}\"])`).find('.active').find('span').first().text()}</li>`\n      $('#breadcrumb').html(menuName)\n\n      this.loadPage(url)\n    }\n\n    loadBlank(url) {\n      window.open(url)\n    }\n\n    loadTop(url) {\n      window.location = url\n    }\n\n    // Private\n\n    _getConfig(config) {\n      config = {\n        ...Default,\n        ...config\n      }\n      return config\n    }\n\n    _addEventListeners() {\n      $(document).on(Event.CLICK, `${Selector.NAV_LINK}[href!=\"#\"]`, (event) => {\n        event.preventDefault()\n        event.stopPropagation()\n\n        if (event.currentTarget.target === '_top') {\n          this.loadTop(event.currentTarget.href)\n        } else if (event.currentTarget.target === '_blank') {\n          this.loadBlank(event.currentTarget.href)\n        } else {\n          this.setUpUrl(event.currentTarget.getAttribute('href'))\n        }\n      })\n    }\n\n    // Static\n\n    static _jQueryInterface(config) {\n      return this.each(function () {\n        let data = $(this).data(DATA_KEY)\n        const _config = typeof config === 'object' && config\n\n        if (!data) {\n          data = new AjaxLoad(this, _config)\n          $(this).data(DATA_KEY, data)\n        }\n      })\n    }\n  }\n\n  /**\n   * ------------------------------------------------------------------------\n   * jQuery\n   * ------------------------------------------------------------------------\n   */\n\n  $.fn[NAME] = AjaxLoad._jQueryInterface\n  $.fn[NAME].Constructor = AjaxLoad\n  $.fn[NAME].noConflict = () => {\n    $.fn[NAME] = JQUERY_NO_CONFLICT\n    return AjaxLoad._jQueryInterface\n  }\n\n  return AjaxLoad\n})($)\n\nexport default AjaxLoad\n"],"file":"ajax-load.js"}